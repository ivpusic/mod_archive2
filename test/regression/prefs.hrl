-define(PREFS_TC1_DEFAULT,
{received_packet,iq,"result",
    {<<?CLIENTNAME>>,<<?SERVERHOST>>,_},
    _,undefined,
    {xmlel,'jabber:client',[],iq,
        [{xmlattr,undefined,from,<<?CLIENTJID>>},
         {xmlattr,undefined,to,_},
         {xmlattr,undefined,id,_},
         {xmlattr,undefined,type,<<"result">>}],
        [{xmlel,?NS,
             [{?NS,none}],
             pref,[],
             [{xmlel,?NS,[],
                  default,
                  [{xmlattr,undefined,save,<<"body">>},
                   {xmlattr,undefined,otr,<<"forbid">>},
                   {xmlattr,undefined,unset,<<"true">>}],
                  []},
              {xmlel,?NS,[],
                  method,
                  [{xmlattr,undefined,type,<<"auto">>},
                   {xmlattr,undefined,use,<<"prefer">>}],
                  []},
              {xmlel,?NS,[],
                  method,
                  [{xmlattr,undefined,type,<<"local">>},
                   {xmlattr,undefined,use,<<"concede">>}],
                  []},
              {xmlel,?NS,[],
                  method,
                  [{xmlattr,undefined,type,<<"manual">>},
                   {xmlattr,undefined,use,<<"concede">>}],
                  []},
              {xmlel,?NS,[],
                  auto,
                  [{xmlattr,undefined,save,<<"true">>}],
                  []}]}]}}).

-define(PREFS_TC2_CHANGE_PUSH,
{received_packet,iq,"set",
    {undefined,<<?SERVERHOST>>,undefined},
    "push",undefined,
    {xmlel,'jabber:client',[],iq,
        [{xmlattr,undefined,from,<<?SERVERHOST>>},
         {xmlattr,undefined,to,
             _},
         {xmlattr,undefined,id,<<"push">>},
         {xmlattr,undefined,type,<<"set">>}],
        [{xmlel,?NS,
             [{?NS,
               none}],
             pref,[],
             [{xmlel,undefined,
                  [{undefined,none}],
                  default,
                  [{xmlattr,undefined,otr,<<"prefer">>},
                   {xmlattr,undefined,save,<<"false">>}],
                  []}]}]}}).

-define(PREFS_TC2_CHANGE_RESULT,
{received_packet,iq,"result",
    {<<?CLIENTNAME>>,<<?SERVERHOST>>,undefined},
    _,undefined,
    {xmlel,'jabber:client',[],iq,
        [{xmlattr,undefined,from,<<?CLIENTJID>>},
         {xmlattr,undefined,to,
             _},
         {xmlattr,undefined,id,_},
         {xmlattr,undefined,type,<<"result">>}],
        []}}).

-define(PREFS_TC2_CHANGED,
{received_packet,iq,"result",
    {<<?CLIENTNAME>>,<<?SERVERHOST>>,undefined},
    _,undefined,
    {xmlel,'jabber:client',[],iq,
        [{xmlattr,undefined,from,<<?CLIENTJID>>},
         {xmlattr,undefined,to,
             _},
         {xmlattr,undefined,id,_},
         {xmlattr,undefined,type,<<"result">>}],
        [{xmlel,?NS,
             [{?NS,none}],
             pref,[],
             [{xmlel,?NS,
                  [],default,
                  [{xmlattr,undefined,save,<<"false">>},
                   {xmlattr,undefined,otr,<<"prefer">>},
                   {xmlattr,undefined,unset,<<"false">>}],
                  []},
              {xmlel,?NS,
                  [],method,
                  [{xmlattr,undefined,type,<<"auto">>},
                   {xmlattr,undefined,use,<<"prefer">>}],
                  []},
              {xmlel,?NS,
                  [],method,
                  [{xmlattr,undefined,type,<<"local">>},
                   {xmlattr,undefined,use,<<"concede">>}],
                  []},
              {xmlel,?NS,
                  [],method,
                  [{xmlattr,undefined,type,<<"manual">>},
                   {xmlattr,undefined,use,<<"concede">>}],
                  []},
              {xmlel,?NS,
                  [],auto,
                  [{xmlattr,undefined,save,<<"true">>}],
                  []}]}]}}).

-define(PREFS_TC3_CHANGE_PUSH,
    {received_packet,iq,"set",
        {undefined,<<?SERVERHOST>>,undefined},
        "push",undefined,
        {xmlel,'jabber:client',[],iq,
            [{xmlattr,undefined,from,<<?SERVERHOST>>},
             {xmlattr,undefined,to,
                 _},
             {xmlattr,undefined,id,<<"push">>},
             {xmlattr,undefined,type,<<"set">>}],
            [{xmlel,
                 ?NS,
                 [{?NS,
                   none}],
                 pref,[],
                 [{xmlel,undefined,
                      [{undefined,none}],
                      method,
                      [{xmlattr,undefined,type,<<"auto">>},
                       {xmlattr,undefined,use,<<"concede">>}],
                      []},
                  {xmlel,undefined,
                      [{undefined,none}],
                      method,
                      [{xmlattr,undefined,type,<<"local">>},
                       {xmlattr,undefined,use,<<"forbid">>}],
                      []},
                  {xmlel,undefined,
                      [{undefined,none}],
                      method,
                      [{xmlattr,undefined,type,<<"manual">>},
                       {xmlattr,undefined,use,<<"prefer">>}],
                      []}]}]}}).

-define(PREFS_TC3_CHANGE_RESULT,
    {received_packet,iq,"result",
        {<<?CLIENTNAME>>,<<?SERVERHOST>>,undefined},
        _,undefined,
        {xmlel,'jabber:client',[],iq,
            [{xmlattr,undefined,from,<<?CLIENTJID>>},
             {xmlattr,undefined,to,
                 _},
             {xmlattr,undefined,id,_},
             {xmlattr,undefined,type,<<"result">>}],
            []}}).

-define(PREFS_TC3_CHANGED,
{received_packet,iq,"result",
    {<<?CLIENTNAME>>,<<?SERVERHOST>>,undefined},
    _,undefined,
    {xmlel,'jabber:client',[],iq,
        [{xmlattr,undefined,from,<<?CLIENTJID>>},
         {xmlattr,undefined,to,
             _},
         {xmlattr,undefined,id,_},
         {xmlattr,undefined,type,<<"result">>}],
        [{xmlel,?NS,
             [{?NS,none}],
             pref,[],
             [{xmlel,?NS,
                  [],default,
                  [{xmlattr,undefined,save,<<"false">>},
                   {xmlattr,undefined,otr,<<"prefer">>},
                   {xmlattr,undefined,unset,<<"false">>}],
                  []},
              {xmlel,?NS,
                  [],method,
                  [{xmlattr,undefined,type,<<"auto">>},
                   {xmlattr,undefined,use,<<"concede">>}],
                  []},
              {xmlel,?NS,
                  [],method,
                  [{xmlattr,undefined,type,<<"local">>},
                   {xmlattr,undefined,use,<<"forbid">>}],
                  []},
              {xmlel,?NS,
                  [],method,
                  [{xmlattr,undefined,type,<<"manual">>},
                   {xmlattr,undefined,use,<<"prefer">>}],
                  []},
              {xmlel,?NS,
                  [],auto,
                  [{xmlattr,undefined,save,<<"true">>}],
                  []}]}]}}).

-define(PREFS_TC4_CHANGE_PUSH,
    {received_packet,iq,"set",
     {undefined,<<?SERVERHOST>>,undefined},
     "push",undefined,
     {xmlel,'jabber:client',[],iq,
      [{xmlattr,undefined,from,<<?SERVERHOST>>},
       {xmlattr,undefined,to,
        _},
       {xmlattr,undefined,id,<<"push">>},
       {xmlattr,undefined,type,<<"set">>}],
      [{xmlel,
        ?NS,
        [{?NS,
          none}],
        pref,[],
        [{xmlel,undefined,
          [{undefined,none}],
          item,
          [{xmlattr,undefined,jid,<<"romeo@montague.net">>},
           {xmlattr,undefined,save,<<"body">>},
           {xmlattr,undefined,expire,<<"604800">>},
           {xmlattr,undefined,otr,<<"concede">>}],
          []}]}]}}).

-define(PREFS_TC4_CHANGE_RESULT,
    {received_packet,iq,"result",
        {<<?CLIENTNAME>>,<<?SERVERHOST>>,undefined},
        _,undefined,
        {xmlel,'jabber:client',[],iq,
            [{xmlattr,undefined,from,<<?CLIENTJID>>},
             {xmlattr,undefined,to,
                 _},
             {xmlattr,undefined,id,_},
             {xmlattr,undefined,type,<<"result">>}],
            []}}).

-define(PREFS_TC4_CHANGED,
    {received_packet,iq,"result",
     {<<?CLIENTNAME>>,<<?SERVERHOST>>,undefined},
     _,undefined,
     {xmlel,'jabber:client',[],iq,
      [{xmlattr,undefined,from,<<?CLIENTJID>>},
       {xmlattr,undefined,to,
        _},
       {xmlattr,undefined,id,_},
       {xmlattr,undefined,type,<<"result">>}],
      [{xmlel,
        ?NS,
        [{?NS,
          none}],
        pref,[],
        [{xmlel,
          ?NS,[],
          default,
          [{xmlattr,undefined,save,<<"false">>},
           {xmlattr,undefined,otr,<<"prefer">>},
           {xmlattr,undefined,unset,<<"false">>}],
          []},
         {xmlel,
          ?NS,[],
          method,
          [{xmlattr,undefined,type,<<"auto">>},
           {xmlattr,undefined,use,<<"concede">>}],
          []},
         {xmlel,
          ?NS,[],
          method,
          [{xmlattr,undefined,type,<<"local">>},
           {xmlattr,undefined,use,<<"forbid">>}],
          []},
         {xmlel,
          ?NS,[],
          method,
          [{xmlattr,undefined,type,<<"manual">>},
           {xmlattr,undefined,use,<<"prefer">>}],
          []},
         {xmlel,
          ?NS,[],
          auto,
          [{xmlattr,undefined,save,<<"true">>}],
          []},
         {xmlel,
          ?NS,[],
          item,
          [{xmlattr,undefined,jid,<<"romeo@montague.net">>},
           {xmlattr,undefined,save,<<"body">>},
           {xmlattr,undefined,expire,<<"604800">>},
           {xmlattr,undefined,otr,<<"concede">>}],
          []}]}]}}).
